# NYC Traffic & Air Quality Dataset

## é¡¹ç›®æ¦‚è¿°
æœ¬æ•°æ®é›†æ•´åˆäº†2024å¹´1æœˆçº½çº¦å¸‚çš„å‡ºç§Ÿè½¦è¡Œç¨‹æ•°æ®ã€ç©ºæ°”è´¨é‡ç›‘æµ‹æ•°æ®ã€é“è·¯ç½‘ç»œæ•°æ®å’Œæ°”è±¡æ•°æ®ï¼Œç”¨äºåˆ†æäº¤é€šæ´»åŠ¨ä¸PM2.5æµ“åº¦çš„å…³ç³»ã€‚

## æ•°æ®æ–‡ä»¶
### æ–‡ä»¶ç»“æ„
- `data/raw/` - åŸå§‹æ•°æ®
- `data/processed/` - æ¸…æ´—åæ•°æ®  
- `scripts/src` - å¤„ç†è„šæœ¬
- `scripts/tests` - å•å…ƒæµ‹è¯•è„šæœ¬
- `outputs/` - æœ€ç»ˆç»“æœå’Œå›¾è¡¨

### è¿è¡Œé¡ºåº
`clean_taxi_data.py` -> `merge_taxi_air_station.py` â€”> `clean_air_data.py` -> `merge_osm_and_climate.py` -> `vis_and_ans.py` -> `dash_app.py`

### ä¸»è¦æ•°æ®é›†
- `final_complete_dataset.csv` - å®Œæ•´æ•´åˆæ•°æ®é›† (10,143è¡Œ Ã— 57åˆ—)

### åŸå§‹æ•°æ®æ–‡ä»¶
- `cleaned_taxi_data_2024_01.csv` - æ¸…æ´—åçš„å‡ºç§Ÿè½¦æ•°æ®
- `station-info.csv` - ç©ºæ°”è´¨é‡ç«™ç‚¹ä¿¡æ¯  
- `weather_nyc_2024_01.json` - æ°”è±¡æ•°æ®
- `taxi_zones.shp` - å‡ºç§Ÿè½¦åŒºåŸŸè¾¹ç•Œæ–‡ä»¶
- `gis_osm_roads_free_1.shp` - OSMé“è·¯ç½‘ç»œæ•°æ®
- `AirQuality2401.csv` - åŸå§‹ç©ºæ°”è´¨é‡ç›‘æµ‹æ•°æ®

## æ•°æ®ç»´åº¦

- **æ—¶é—´èŒƒå›´**: 2024-01-01 00:00:00 è‡³ 2024-01-31 23:00:00
- **ç©ºé—´èŒƒå›´**: çº½çº¦å¸‚5ä¸ªè¡Œæ”¿åŒº
- **ç©ºæ°”è´¨é‡ç«™ç‚¹**: 16ä¸ªç›‘æµ‹ç«™
- **æ—¶é—´ç²’åº¦**: å°æ—¶çº§åˆ«
- **æ€»è®°å½•æ•°**: 10,143æ¡

## ç‰¹å¾ç±»åˆ«

### 1. æ ‡è¯†ç‰¹å¾
- `timestamp` - æ—¶é—´æˆ³ (å°æ—¶ç²’åº¦)
- `site_id` - ç©ºæ°”è´¨é‡ç«™ç‚¹ID
- `site_name` - ç«™ç‚¹åç§°
- `borough` - æ‰€å±è¡Œæ”¿åŒº

### 2. ç›®æ ‡å˜é‡
- `PM2_5` - PM2.5æµ“åº¦ (Î¼g/mÂ³)

### 3. äº¤é€šç‰¹å¾
- `trip_count` - è¡Œç¨‹æ•°é‡
- `total_distance` - æ€»è¡Œé©¶è·ç¦»
- `avg_speed` - å¹³å‡è½¦é€Ÿ
- `total_passengers` - ä¹˜å®¢æ€»æ•°
- `trip_density` - è¡Œç¨‹å¯†åº¦
- `passenger_density` - ä¹˜å®¢å¯†åº¦

### 4. é“è·¯ç‰¹å¾
- `road_density_[300/500/1000]m` - é“è·¯å¯†åº¦
- `total_road_length_[300/500/1000]m` - é“è·¯æ€»é•¿åº¦
- `major_road_ratio_[300/500/1000]m` - ä¸»è¦é“è·¯æ¯”ä¾‹
- `intersection_density_[300/500/1000]m` - äº¤å‰å£å¯†åº¦

### 5. æ°”è±¡ç‰¹å¾
- `temperature` - æ¸©åº¦ (Â°C)
- `humidity` - æ¹¿åº¦ (%)
- `pressure` - æ°”å‹ (hPa)
- `wind_speed` - é£é€Ÿ (m/s)
- `wind_direction` - é£å‘ (Â°)
- `precipitation` - é™æ°´é‡ (mm)
- `wind_direction_cat` - é£å‘åˆ†ç±»
- `wind_speed_cat` - é£é€Ÿåˆ†ç±»
- `temperature_cat` - æ¸©åº¦åˆ†ç±»

### 6. æ—¶é—´ç‰¹å¾
- `hour_of_day` - å°æ—¶ (0-23)
- `day_of_week` - æ˜ŸæœŸå‡  (0-6)
- `is_weekend` - æ˜¯å¦å‘¨æœ«
- `is_rush_hour` - æ˜¯å¦é«˜å³°æ—¶æ®µ
- `sin_hour`, `cos_hour` - å°æ—¶å‘¨æœŸç‰¹å¾
- `sin_day`, `cos_day` - æ˜ŸæœŸå‘¨æœŸç‰¹å¾

### 7. æ—¶åºç‰¹å¾
- `*_lag_[1/3/6]` - æ»åç‰¹å¾ (1/3/6å°æ—¶)
- `*_ma_[3/6/12]` - ç§»åŠ¨å¹³å‡ç‰¹å¾ (3/6/12å°æ—¶)

## æ•°æ®è´¨é‡è¯´æ˜

### æ•°æ®æ¥æº

1. **å‡ºç§Ÿè½¦æ•°æ®**: NYC TLC Trip Record Data [https://www.nyc.gov/site/tlc/about/tlc-trip-record-data.page]
2. **ç©ºæ°”è´¨é‡æ•°æ®**: NYC Air Quality Monitoring Network[https://a816-dohbesp.nyc.gov/IndicatorPublic/data-features/realtime-air-quality/]
3. **æ°”è±¡æ•°æ®**: Open-Meteo Historical Weather API [https://archive-api.open-meteo.com/v1/archive?latitude=40.7128&longitude=-74.0060&start_date=2024-01-01&end_date=2024-01-31&hourly=temperature_2m,relative_humidity_2m,pressure_msl,wind_speed_10m,wind_direction_10m,precipitation&timezone=America%2FNew_York]
4. **é“è·¯æ•°æ®**: OpenStreetMap [https://download.geofabrik.de/north-america/us/new-york.html] 
5. **å‡ºç§Ÿè½¦è¡Œæ”¿åŒºåˆ’**: NYC Taxi Zones [https://www.nyc.gov/site/tlc/about/tlc-trip-record-data.page]
6. **Dashçš„è¡Œæ”¿åŒºåˆ’**ï¼š[https://raw.githubusercontent.com/dwillis/nyc-maps/master/boroughs.geojson]

### å®Œæ•´æ•°æ®é›†åˆ—ç»Ÿè®¡æŠ¥å‘Š
#### ğŸ¯ ç‰¹å¾æ¦‚è§ˆ
| ç‰¹å¾ç±»åˆ« | ç‰¹å¾æ•°é‡ | æ•°æ®ç±»å‹åˆ†å¸ƒ | æ€»è®°å½•æ•° | å®Œæ•´è®°å½•æ•° | æ•°æ®å®Œæ•´æ€§ |
|---------|----------|--------------|----------|------------|------------|
| ç©ºæ°”è´¨é‡ç‰¹å¾ | 7 | float64: 7 | 37,111 | 31,996 | 86.2% |
| äº¤é€šç‰¹å¾ | 29 | float64: 26, object: 3 | 37,111 | 31,996 | 86.2% |
| é“è·¯ç‰¹å¾ | 12 | float64: 12 | 37,111 | 31,996 | 86.2% |
| æ°”è±¡ç‰¹å¾ | 15 | float64: 12, int64: 2, object: 1 | 37,111 | 31,996 | 86.2% |
| æ—¶é—´ç‰¹å¾ | 8 | int64: 2, bool: 2, float64: 4 | 37,111 | 31,996 | 86.2% |
| æ ‡è¯†ç‰¹å¾ | 3 | datetime64[ns]: 1, object: 2 | 37,111 | 31,996 | 86.2% |
| **æ€»è®¡** | **74** | **æ•°å€¼: 68, åˆ†ç±»: 5, æ—¶é—´: 1** | **37,111** | **31,996** | **86.2%** |

#### ğŸ¯ ç©ºæ°”è´¨é‡ç‰¹å¾ (7ä¸ªç‰¹å¾)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| PM2_5 | float64 | 8.394 | 0.1 | 71.0 | 7.642 |
| PM2_5_lag_1 | float64 | 8.394 | 0.1 | 71.0 | 7.642 |
| PM2_5_lag_3 | float64 | 8.394 | 0.1 | 71.0 | 7.642 |
| PM2_5_lag_6 | float64 | 8.480 | 0.1 | 71.0 | 7.644 |
| PM2_5_ma_3 | float64 | 7.518 | 0.1 | 51.267 | 7.632 |
| PM2_5_ma_6 | float64 | 7.097 | 0.3 | 45.883 | 7.638 |
| PM2_5_ma_12 | float64 | 6.800 | 0.5 | 38.533 | 7.653 |

#### ğŸ¯ äº¤é€šç‰¹å¾ - æ ¸å¿ƒæŒ‡æ ‡ (9ä¸ª)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| trip_count | float64 | 0.000 | 0.0 | 1490.286 | 264.754 |
| total_distance | float64 | 0.000 | 0.0 | 4768.943 | 867.685 |
| avg_trip_distance | float64 | 0.000 | 0.0 | 29.580 | 5.176 |
| avg_speed | float64 | 0.000 | 0.0 | 58.696 | 13.363 |
| total_passengers | float64 | 0.000 | 0.0 | 1844.857 | 349.856 |
| total_revenue | float64 | 0.000 | 0.0 | 36650.399 | 7069.489 |
| avg_duration | float64 | 0.000 | 0.0 | 2.535 | 0.318 |
| trip_density | float64 | 0.000 | 0.0 | 25.216 | 4.144 |
| passenger_density | float64 | 0.000 | 0.0 | 31.216 | 5.466 |

#### ğŸ¯ äº¤é€šç‰¹å¾ - æ»åç‰¹å¾ (12ä¸ª)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| trip_count_lag_1 | float64 | 0.000 | 0.0 | 1490.286 | 264.692 |
| avg_speed_lag_1 | float64 | 0.000 | 0.0 | 58.696 | 13.355 |
| passenger_density_lag_1 | float64 | 0.000 | 0.0 | 31.216 | 5.465 |
| trip_count_lag_3 | float64 | 0.000 | 0.0 | 1490.286 | 264.445 |
| avg_speed_lag_3 | float64 | 0.000 | 0.0 | 58.696 | 13.342 |
| passenger_density_lag_3 | float64 | 0.000 | 0.0 | 31.216 | 5.460 |
| trip_count_lag_6 | float64 | 0.000 | 0.0 | 1490.286 | 263.982 |
| avg_speed_lag_6 | float64 | 0.000 | 0.0 | 58.696 | 13.321 |
| passenger_density_lag_6 | float64 | 0.000 | 0.0 | 31.216 | 5.451 |
| trip_count_ma_3 | float64 | 0.000 | 0.0 | 1398.619 | 264.858 |
| avg_speed_ma_3 | float64 | 0.000 | 0.0 | 37.770 | 13.363 |
| trip_count_ma_6 | float64 | 0.000 | 0.0 | 1261.548 | 264.921 |

#### ğŸ¯ äº¤é€šç‰¹å¾ - ç§»åŠ¨å¹³å‡ä¸é£é€Ÿ (8ä¸ª)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| avg_speed_ma_6 | float64 | 0.000 | 0.0 | 34.849 | 13.364 |
| trip_count_ma_12 | float64 | 0.000 | 0.0 | 1073.083 | 264.869 |
| avg_speed_ma_12 | float64 | 0.000 | 0.0 | 34.849 | 13.367 |
| wind_speed | float64 | 0.000 | 0.0 | 15.917 | 3.894 |
| wind_speed_cat | object | 0.092 | NaN | NaN | NaN |
| wind_speed_lag_1 | float64 | 0.046 | 0.0 | 15.917 | 3.894 |
| wind_speed_lag_3 | float64 | 0.137 | 0.0 | 15.917 | 3.894 |
| wind_speed_lag_6 | float64 | 0.275 | 0.0 | 15.917 | 3.894 |

#### ğŸ¯ é“è·¯ç‰¹å¾ (12ä¸ªç‰¹å¾)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| road_density_300m | float64 | 62.5 | 51216.435 | 111878.314 | 81140.917 |
| total_road_length_300m | float64 | 62.5 | 14457.855 | 31582.058 | 22905.218 |
| major_road_ratio_300m | float64 | 62.5 | 0.039 | 0.226 | 0.151 |
| intersection_density_300m | float64 | 62.5 | 605.761 | 1934.186 | 1210.342 |
| road_density_500m | float64 | 62.5 | 64154.867 | 104039.964 | 78632.939 |
| total_road_length_500m | float64 | 62.5 | 50306.213 | 81581.598 | 61659.007 |
| major_road_ratio_500m | float64 | 62.5 | 0.112 | 0.260 | 0.161 |
| intersection_density_500m | float64 | 62.5 | 661.874 | 2013.678 | 1202.171 |
| road_density_1000m | float64 | 62.5 | 58133.704 | 83177.009 | 67192.406 |
| total_road_length_1000m | float64 | 62.5 | 182339.181 | 260888.723 | 210752.240 |
| major_road_ratio_1000m | float64 | 62.5 | 0.092 | 0.221 | 0.150 |
| intersection_density_1000m | float64 | 62.5 | 665.700 | 1629.817 | 1024.215 |

#### ğŸ¯ æ°”è±¡ç‰¹å¾ - åŸºç¡€æŒ‡æ ‡ (6ä¸ª)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| temperature | float64 | 0.000 | -9.1 | 21.5 | 3.335 |
| humidity | int64 | 0.000 | 23 | 100 | 68.724 |
| pressure | float64 | 0.000 | 982.6 | 1038.0 | 1016.222 |
| wind_speed | float64 | 0.000 | 0.0 | 15.917 | 3.894 |
| wind_direction | int64 | 0.000 | 1 | 360 | 212.117 |
| precipitation | float64 | 0.000 | 0.0 | 14.8 | 0.204 |

#### ğŸ¯ æ°”è±¡ç‰¹å¾ - åˆ†ç±»ä¸æ»å (9ä¸ª)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | æœ€å°å€¼ | æœ€å¤§å€¼ | å¹³å‡å€¼ |
|----------|----------|-------------|--------|--------|--------|
| wind_direction_cat | object | 0.000 | NaN | NaN | NaN |
| wind_speed_cat | object | 0.092 | NaN | NaN | NaN |
| temperature_cat | object | 0.000 | NaN | NaN | NaN |
| temperature_lag_1 | float64 | 0.046 | -9.1 | 21.5 | 3.333 |
| wind_speed_lag_1 | float64 | 0.046 | 0.0 | 15.917 | 3.894 |
| temperature_lag_3 | float64 | 0.137 | -9.1 | 21.5 | 3.329 |
| wind_speed_lag_3 | float64 | 0.137 | 0.0 | 15.917 | 3.894 |
| temperature_lag_6 | float64 | 0.275 | -9.1 | 21.5 | 3.317 |
| wind_speed_lag_6 | float64 | 0.275 | 0.0 | 15.917 | 3.894 |

#### ğŸ¯ æ—¶é—´ç‰¹å¾ (8ä¸ªç‰¹å¾)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) |
|----------|----------|-------------|
| hour_of_day | int64 | 0.0 |
| day_of_week | int64 | 0.0 |
| is_weekend | bool | 0.0 |
| is_rush_hour | bool | 0.0 |
| sin_hour | float64 | 0.0 |
| cos_hour | float64 | 0.0 |
| sin_day | float64 | 0.0 |
| cos_day | float64 | 0.0 |

#### ğŸ¯ æ ‡è¯†ç‰¹å¾ (3ä¸ªç‰¹å¾)
| ç‰¹å¾åç§° | æ•°æ®ç±»å‹ | ç¼ºå¤±æ¯”ä¾‹(%) | å”¯ä¸€å€¼æ•°é‡ | æœ€å¸¸è§å€¼ |
|----------|----------|-------------|------------|----------|
| timestamp | datetime64[ns] | 0.0 | 2183.0 | 2024-01-01 00:00:00 |
| site_id | object | 0.0 | 17.0 | 360050080 |
| borough | object | 0.0 | 5.0 | Manhattan |

### ğŸ” å…³é”®æ•°æ®å‘ç°æ€»ç»“

#### ğŸŒ«ï¸ PM2.5æµ“åº¦ç»Ÿè®¡
| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| å¹³å‡å€¼ | 7.64 Î¼g/mÂ³ |
| ä¸­ä½æ•° | 6.30 Î¼g/mÂ³ |
| æ ‡å‡†å·® | 4.95 Î¼g/mÂ³ |
| è¶…è¿‡WHOæ ‡å‡† | 7.3% çš„è®°å½• |
| è¶…è¿‡EPAæ ‡å‡† | 0.1% çš„è®°å½• |

#### ğŸš— äº¤é€šæ´»åŠ¨ç»Ÿè®¡
| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| å¹³å‡æ¯å°æ—¶è¡Œç¨‹æ•° | 264.8 |
| æ€»ä¹˜å®¢æ•° | 12,219,773 |

#### ğŸ—ºï¸ ç©ºé—´åˆ†å¸ƒ
| åŒºåŸŸ | ç«™ç‚¹æ•°é‡ | è¡Œç¨‹æ•°é‡ | PM2.5å¹³å‡å€¼ |
|------|----------|----------|-------------|
| Bronx | 3 | 20,815 | 7.44 Î¼g/mÂ³ |
| Brooklyn | 1 | 86,787 | 6.74 Î¼g/mÂ³ |
| Manhattan | 8 | 8,348,548 | 8.07 Î¼g/mÂ³ |
| Queens | 3 | 791,011 | 7.42 Î¼g/mÂ³ |
| Staten Island | 2 | 156 | 7.45 Î¼g/mÂ³ |

#### ğŸ“Š æ•°æ®è´¨é‡è¯„ä¼°
| è¯„ä¼°æŒ‡æ ‡ | æ•°å€¼ |
|----------|------|
| æ€»ä½“ç¼ºå¤±ç‡ | 10.34% |
| å¯ç”¨å»ºæ¨¡è®°å½• | 31,996 è¡Œ |
| å®Œæ•´ç‰¹å¾è¦†ç›–ç‡ | 86.2% |
